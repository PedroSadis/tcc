<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sistema de Ponto</title>
    
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
    
    <link rel="stylesheet" href="style.css">

</head>
<body>

    <div id="login-view">
        <h2>Login do Sistema</h2>
        <form id="loginForm">
            <input type="email" id="email" placeholder="Email" required>
            <input type="password" id="senha" placeholder="Senha" required>
            
            <select id="tipo">
                <option value="funcionario">Funcionário</option>
                <option value="rh">Recursos Humanos (RH)</option>
            </select>

            <button type="submit">Entrar</button>
            <p id="login-error"></p>
        </form>
    </div>

    <div id="app-view">
        <button id="logoutButton">Sair</button>
        <h2 id="welcome-message"></h2>
        <hr>

        <div id="funcionario-area">
            <h3>Registrar Ponto</h3>
            <button id="btnEntrada">Registrar Entrada</button>
            <button id="btnSaida">Registrar Saída</button>
            <p id="ponto-status"></p>

            <hr>
            <h4>Meus Últimos Registros</h4>
            <div id="lista-registros">
                <p>Carregando registros...</p>
            </div>

            <hr>
            <h4>Solicitações (Ajuste de Ponto / Atestado)</h4>
            <form id="solicitacaoForm">
                <label for="tipo_solicitacao">Tipo de Solicitação:</label>
                <select id="tipo_solicitacao" required>
                    <option value="">-- Selecione --</option>
                    <option value="Ajuste de Ponto">Ajuste de Ponto</option>
                    <option value="Atestado (Falta)">Atestado (Falta)</option>
                </select>
                
                <label for="justificativa">Justificativa:</label>
                <textarea id="justificativa" placeholder="Descreva o motivo (ex: 'Esqueci de bater o ponto na saída do dia 10' ou 'Atestado médico de 2 dias')" required></textarea>

                <label for="anexo_atestado">Link do Anexo (Opcional):</label>
                <input type="text" id="anexo_atestado" placeholder="Cole aqui o link para o seu atestado (Ex: Google Drive)">

                <button type="submit">Enviar Solicitação</button>
            </form>
            <p id="solicitacao-status"></p>

            <hr>
            <h4>Registrar Entrega de Mercadoria</h4>
            <form id="entregaForm">
                <label for="descricao_mercadoria">Descrição / Quantidade:</label>
                <input type="text" id="descricao_mercadoria" placeholder="Ex: 10 caixas de material, 5 paletes" required>

                <label for="numero_nota_fiscal">Número da Nota Fiscal (Opcional):</label>
                <input type="text" id="numero_nota_fiscal" placeholder="Ex: 123456">

                <button type="submit">Registrar Entrega</button>
            </form>
            <p id="entrega-status"></p>
        </div>

        <div id="rh-area">
            <h3>Painel RH</h3>
            
            <h4>Cadastrar Novo Funcionário</h4>
            <form id="registroFuncionarioForm">
                <input type="text" id="reg_nome" placeholder="Nome Completo" required>
                <input type="text" id="reg_cpf" placeholder="CPF (xxx.xxx.xxx-xx)" required>
                <input type="email" id="reg_email" placeholder="Email (ex: func@empresa.com)" required>
                <input type="password" id="reg_senha" placeholder="Senha Provisória" required>
                <label for="reg_data_admissao">Data de Admissão:</label>
                <input type="date" id="reg_data_admissao" required>
                
                <label for="reg_cargo">Cargo:</label>
                <select id="reg_cargo">
                    <option value="">-- Carregando Cargos... --</option>
                </select>
                
                <label for="reg_departamento">Departamento:</label>
                <select id="reg_departamento">
                    <option value="">-- Carregando Departamentos... --</option>
                </select>
                
                <button type="submit" style="margin-top: 15px;">Cadastrar Funcionário</button>
            </form>
            <p id="rh-status"></p>

            <hr>
            <h4>Gerar Relatório de Funcionário</h4>
            
            <label for="rh_select_funcionario">Selecione um Funcionário:</label>
            <select id="rh_select_funcionario">
                <option value="">-- Carregando funcionários... --</option>
            </select>
            
            <button id="rh_btn_gerar_relatorio">Gerar Relatório</button>
            <p id="rh-relatorio-status"></p>

            <div id="rh_relatorio_resultado" style="display: none;">
                <h5>Registros de Ponto</h5>
                <div id="relatorio_pontos_content"></div>
                <h5 style="margin-top: 15px;">Registros de Entregas</h5>
                <div id="relatorio_entregas_content"></div>
            </div>

            <hr>
            <h4>Solicitações Pendentes</h4>
            <p id="rh-solicitacao-status"></p>

            <div id="rh_solicitacoes_pendentes" style="max-height: 400px; overflow-y: auto; background: var(--cor-fundo); padding: 10px; border-radius: var(--radius);">
                </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>